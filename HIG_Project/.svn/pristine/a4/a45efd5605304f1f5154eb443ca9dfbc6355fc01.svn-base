<!--
 * == ê°œì •ì´ë ¥(Modification Information) ==
 *
 *   ìˆ˜ì •ì¼      			ìˆ˜ì •ì           ìˆ˜ì •ë‚´ìš©
 *  ============   	============== =======================
 *  2025. 3. 31.     	ì •íƒœìš°            ìµœì´ˆ ìƒì„±
 *  2025. 4. 02  		ìµœìœ¤ì‹ 			ê²°ì¬ëŒ€ê¸°í•¨ ìˆ˜ì •
-->
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib uri="http://www.springframework.org/security/tags"
	prefix="security"%>

<style>
#table tbody td {
    font-size: 15px !important;
}
#scheduleCard{
cursor: pointer;
}
.workStatusBtnArea {
	margin-left: 80px; /* ì¢Œì¸¡ ì—¬ë°± */
}
/* ì¶œê·¼ ì‹œê°„ ë° í‡´ê·¼ ì‹œê°„ í…ìŠ¤íŠ¸ì— ëŒ€í•œ ìŠ¤íƒ€ì¼ */
#startTime, #endTime, #workTime {
	font-size: 18px;
	font-weight: bold;
	color: #25396f;
	margin-bottom: 5px;
	margin-left: 20px;
}

.col-md-6 {
	display: flex;
	flex-direction: column;
	height: 100% /* ì›í•˜ëŠ” ë†’ì´ */
}

.row.g-6 {
	height: 100%;
	display: flex; /* ë‚´ë¶€ ìš”ì†Œë“¤ ë†’ì´ ê· ë“± ë°°ë¶„ */
}

h4 {
	text-align: center;
}

h3 {
	font-weight: 700;
	color: #212529;
}

/* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.card {
	border-radius: 12px;
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
	background-color: #ffffff;
	padding: 20px;
	transition: all 0.3s ease-in-out;
}

.card:hover {
	transform: translateY(-3px);
}

.card-header {
	background-color: #f8f9fa;
	padding: 15px;
	border-bottom: 1px solid #ddd;
	font-weight: 600;
	font-size: 16px;
}

/* í‘œ ìŠ¤íƒ€ì¼ */
.table {
	border-radius: 8px;
	overflow: hidden;
	background-color: #ffffff;
}

.table th {
	background-color: #f8f9fa;
	color: #333;
	font-weight: 600;
	padding: 12px;
}

.table td {
	padding: 10px;
	vertical-align: middle;
}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn-outline-info {
	border-radius: 8px;
	font-size: 14px;
	margin-top: 10px;
	padding: 10px 15px;
	border: 1px solid #007bff;
	color: #8aa0e0;
	transition: all 0.3s ease-in-out;
}

.btn-outline-info:hover {
	background-color: #0dcaf0;
	color: #ffffff;
}

/* í”„ë¡œí•„ ì •ë³´ */
.avatar img {
	border-radius: 50%;
	width: 60px;
	height: 60px;
	border: 3px solid #ddd;
}

/* ê³µì§€ì‚¬í•­ ë° ê²°ì¬ ëŒ€ê¸°í•¨ ìŠ¤íƒ€ì¼ */
.section {
	background: #ffffff;
	padding: 20px;
	border-radius: 8px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.chart-container {
	flex-grow: 0; /* ë‚¨ì€ ê³µê°„ì„ ë‹¤ ì±„ì›€ */
	height: 93%;
	display: flex;
	flex-direction: column;
	justify-content: center; /* ì°¨íŠ¸ë¥¼ ì¤‘ì•™ ì •ë ¬ */
	background: #ffffff;
	padding: 20px;
	border-radius: 10px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* ì‹œê°„ ì •ë³´ ìŠ¤íƒ€ì¼ */
.time-info {
	display: block;
	font-size: 16px;
	color: #333; /* ê¸€ììƒ‰ */
	margin-bottom: 2px;
}

.workDuration {
	font-weight: bold;
}

/* ì¶”ê°€ ìŠ¤íƒ€ì¼: ê°„ê²©ê³¼ ì •ë ¬ */
span {
	display: inline-block;
	margin-left: 20px;
}

.card {
	border-radius: 10px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	background-color: #fff;
	padding: 20px;
}

.card-header {
	background-color: #f8f9fa;
	padding: 10px 15px;
	border-bottom: 1px solid #ddd;
	font-weight: bold;
}

.card-body {
	padding: 15px;
}

.time-info {
	font-size: 14px;
	color: #555;
}

.btn-outline-info {
	border-radius: 5px;
	font-size: 14px;
	margin-top: 10px;
	padding: 8px;
	border: 1px solid #ddd;
}

tbody {
	white-space: nowrap;
}

.scrollable-list {
	max-height: 600px; /* ì›í•˜ëŠ” ë†’ì´ë¡œ ì¡°ì • (ì˜ˆ: 400px) */
	overflow-y: auto; /* ìˆ˜ì§ ìŠ¤í¬ë¡¤ë°” ìë™ ìƒì„± */
}

.col-4-5 {
	flex: 0 0 37.5%; /* 4.5 / 12 */
	max-width: 37.5%;
}

.col-3 {
	flex: 0 0 25%;
	max-width: 25%;
}

.scrollable-list {
	max-height: 250px;
	overflow-y: auto;
}

@media ( min-width : 992px) {
	.col-lg-4_5 {
		flex: 0 0 37.5%;
		max-width: 37.5%;
	}
}
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet"
	href="${pageContext.request.contextPath}/resources/css/mainpage/approverDrafts.css">
<!-- ì „ìê²°ì¬ -> ë‚´ ë¬¸ì„œ ì°¨íŠ¸ -->
<script
	src="${pageContext.request.contextPath}/resources/js/approval/approverChartStatusCount.js"></script>
<script
	src="${pageContext.request.contextPath}/resources/js/approval/approverChart.js"></script>
<security:authentication property="principal" var="principal" />
<div id="main" class="layout-horizontal">
	<h3 class="mb-4">ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”, HR ê´€ë¦¬ìë‹˜</h3>

	<div class="row mb-4">
		<div class="col-6 col-lg-3 col-md-6">
			<div class="card">
				<div class="card-body px-4 py-4-5">
					<div class="row">
						<div
							class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
							<div class="stats-icon blue mb-2">
								<i class="iconly-boldUser1"></i>
							</div>
						</div>
						<div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
							<h6 class="text-muted font-semibold">ì „ì²´ ì§ì› ìˆ˜</h6>
							<h2 id="empCount"></h2>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="col-6 col-lg-3 col-md-6">
			<div class="card">
				<div class="card-body px-4 py-4-5">
					<div class="row">
						<div
							class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
							<div class="stats-icon green mb-2">
								<i class="iconly-boldAdd-User"></i>
							</div>
						</div>
						<div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
							<h6 class="text-muted font-semibold">ì˜¬í•´ ì…ì‚¬ì</h6>
							<h2 id="hireCount"></h2>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="col-6 col-lg-3 col-md-6">
			<div class="card">
				<div class="card-body px-4 py-4-5">
					<div class="row">
						<div
							class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
							<div class="stats-icon red mb-2">
								<i class="iconly-boldProfile"></i>
							</div>
						</div>
						<div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
							<h6 class="text-muted font-semibold">ì˜¬í•´ í‡´ì‚¬ì</h6>
							<h2 id="resignCount"></h2>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="col-6 col-lg-3 col-md-6">
			<div class="card">
				<div class="card-body px-4 py-4-5">
					<div class="row">
						<div
							class="col-md-4 col-lg-12 col-xl-12 col-xxl-5 d-flex justify-content-start ">
							<div class="stats-icon mb-2" style="background-color: #f1c40f;">
								<i class="iconly-boldProfile"></i>
							</div>
						</div>
						<div class="col-md-8 col-lg-12 col-xl-12 col-xxl-7">
							<h6 class="text-muted font-semibold">ì˜¤ëŠ˜ íœ´ê°€ì¸ ì§ì›</h6>
							<h2 id="attendanceCount"></h2>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="page-content">
		<section class="row">
			<div class="col-12 col-lg-9">
				<div class="row g-6">
					<div class="col-md-6">
						<div class="chart-container">
							<h6>ğŸ’¼ ë¶€ì„œë³„ ê¸‰ì—¬ ì°¨íŠ¸</h6>
							<canvas id="deptSalaryChart"></canvas>
						</div>
					</div>
					<div class="col-md-6">
						<div class="chart-container">
							<h6>ğŸ“¥ ì±„ìš© í˜„í™©</h6>
							<canvas id="recruitChart"></canvas>
						</div>
					</div>
				</div>
			</div>
			<c:set var="fullPath" value="${employee.empPath}" />
			<c:set var="startIndex" value="${fn:indexOf(fullPath, 'fileImages')}" />
			<c:set var="cutStart" value="${startIndex + 10}" />
			<c:set var="cutEnd" value="${fn:length(fullPath)}" />
			<c:set var="fileName"
				value="${fn:substring(fullPath, cutStart, cutEnd)}" />
			<c:set var="webPath" value="/resources/fileImages/${fileName}" />
			<!-- ìº˜ë¦°ë” ì˜¤ë¥¸ìª½ (í”„ë¡œí•„ ì •ë³´) -->
			<div class="col-12 col-lg-3">
				<div class="card">
					<div class="card-body py-3 px-5">
						<div class="d-flex align-items-center">
							<div class="avatar avatar-xl">
								<a data-bs-toggle="modal" data-bs-target="#exampleModal1"
									data-emp-id="${principal.realUser.employee.empId}"><img src="${pageContext.request.contextPath}${webPath}"
									alt="Face 1"></a>
							</div>
							<div class="ms-3 name">
								<h6>${principal.realUser.department.departmentName}
									${principal.realUser.employee.team.teamName}</h6>
								<h5 class="text-muted mb-0">${principal.realUser.empName }
									${principal.realUser.rank.rankName }</h5>

								<a href="javascript:logoutStatus()">ë¡œê·¸ì•„ì›ƒ</a>
							</div>
						</div>
					</div>
				</div>
				<div class="card">
					<div class="card-header">
						<h4>ë‚˜ì˜ ê·¼íƒœ</h4>
					</div>
					<h6>
						<span id="time"></span>
					</h6>
					<c:if test="${not empty sessionAccount.attendance}">
						<c:forEach items="${sessionAccount.attendance}" var="attendance">
							<span id="startTime" class="time-info">ì¶œê·¼ ì‹œê°„: <strong>${attendance.workStartTime}</strong>
							</span>
							<br />
							<span id="endTime" class="time-info">í‡´ê·¼ ì‹œê°„: <strong>${attendance.workEndTime}</strong>
							</span>
							<br />
							<span id="workTime">ì¼í•œ ì‹œê°„: <span class="workDuration"
								data-workstart="${attendance.workStartTime}"
								data-workend="${attendance.workEndTime}"> </span>
							</span>
							<br />
						</c:forEach>
					</c:if>
					<c:if test="${empty sessionAccount.attendance}">
						<span id="startTime">ì¶œê·¼ ì‹œê°„ </span>
						<br />
						<span id="endTime">í‡´ê·¼ ì‹œê°„ </span>
						<br />
						<span id="workTime">ì¼í•œ ì‹œê°„ </span>
						<br />
					</c:if>
					<svg width="100%" height="5">
							  <line x1="0" y1="2.5" x2="100%" y2="2.5" stroke="#ccc"
							stroke-dasharray="4,4" />
							</svg>

					<div class="workStatusBtnArea">
						<a class="btn btn-outline-info" href="${pageContext.request.contextPath}/generate-qr" data-bs-toggle="modal" data-bs-target="#exampleModal__">
							ì¶œ/í‡´ QR
						</a> <select id="workStatusSelect" name="workStatus"
							onchange="updateWorkStatus()" class="btn btn-outline-info">
							<c:forEach items="${workStatusList}" var="workStatusVO">
								<c:if test="${workStatusVO.statusPos eq 'Y'}">
									<option value="${workStatusVO.statusId}"
										${workStatusVO.statusId eq workStatus.statusId ? 'selected' : ''}
										${workStatus.statusId eq 'STAT_03' && workStatusVO.statusId ne 'STAT_03' ? 'disabled' : ''}>
										${workStatusVO.statusName}</option>
								</c:if>
							</c:forEach>
						</select>
					</div>
				</div>
			</div>
		</section>

		<section class="row">
			<!-- ê²Œì‹œíŒ, ì „ìê²°ì¬, ë‚´ í•  ì¼ í•œ ì¤„ ì •ë ¬ -->
			<div class="col-12">
				<div class="row g-4">

					<!-- ì „ìê²°ì¬ ì¹´ë“œ (4.5) -->
					<div class="col-12 col-lg-4_5">
						<div class="card">
							<div class="card-header"></div>
							<div class="card-body">
								<div class="d-flex flex-column align-items-center gap-4">
									<!-- ê¸°ì•ˆí•œ ë¬¸ì„œ ì°¨íŠ¸ -->
									<div class="chart-container"
										style="height: 240px; width: 100%; max-width: 420px;">
										<h5 class="text-center mb-2">
										<a href="${pageContext.request.contextPath }/approval/mydrafts">ê¸°ì•ˆ ë¬¸ì„œ</a>
										</h5>
										<canvas id="statusChart"></canvas>
									</div>
									<!-- ê²°ì¬í•  ë¬¸ì„œ ì°¨íŠ¸ -->
									<div class="chart-container"
										style="height: 240px; width: 100%; max-width: 420px;">
										<h5 class="text-center mb-2">
										<a href="${pageContext.request.contextPath }/approval/approverDrafts">ê²°ì¬ ë¬¸ì„œ</a>
										</h5>
										<canvas id="statusApprChart"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- ê³µì§€ì‚¬í•­ ì¹´ë“œ (4.5) -->
					<div class="col-12 col-lg-4_5">
						<div class="card" style="height: 595px;">
							<div class="card-header">
								<h4 class="card-title">
									<a href="${pageContext.request.contextPath }/board/list"
										class="text-decoration-none text-grey">ê³µì§€ì‚¬í•­</a>
								</h4>
							</div>
							<div class="card-body">
								<div class="list-group scrollable-list"
									style="min-height: 510px;">
									<div class="table-responsive"
										style="max-width: 100%; overflow-x: auto;">
										<table id="table" class="table table-striped datatable">
											<thead>
												<tr>
													<th>ì œëª©</th>
													<th>ì‘ì„±ì¼</th>
												</tr>
											</thead>
											<tbody>
												<c:choose>
													<c:when test="${not empty boardList}">
														<c:forEach items="${boardList}" var="board">
															<tr>
																<td><a href="javascript:void(0);"
																	onclick="navigateToDetail('${board.noticeId}')">${board.title}</a></td>
																<td>${board.createdAt}</td>
															</tr>
														</c:forEach>
													</c:when>
													<c:otherwise>
														<tr>
															<td colspan="2">ê³µì§€ê¸€ ì—†ìŒ.</td>
														</tr>
													</c:otherwise>
												</c:choose>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- ì´ë²ˆì£¼ ë‚´ í•  ì¼ ì¹´ë“œ (3) -->
						<div class="col-12 col-lg-3">
						    <div class="card" style="height: 595px;" id="scheduleCard">
						        <div class="card-header">
						            <h4 class="card-title"><a href="#">ì´ë²ˆì£¼ ì „ì‚¬ ì¼ì •</a></h4>
						        </div>
						        <div class="card-body">
						            <div class="list-group scrollable-list" style="min-height: 510px;">
						                <c:choose>
						                    <c:when test="${not empty scheduleList}">
						                        <c:forEach var="schedule" items="${scheduleList}">
						                            <c:if test="${schedule.scheduleVisibility != 'D' || schedule.empId == principal.realUser.employee.empId}">
						                                <!-- ì¼ì •ì˜ ê³µê°œ ë²”ìœ„ê°€ 'D'ë¼ë©´ ì‘ì„±ìë§Œ ë³¼ ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬ -->
						                                <div class="todo-item mb-3 p-3 border rounded shadow-sm" style="background-color: #f6f9fc;">
						                                    <!-- ì œëª© + ì´ë¦„ -->
						                                    <div class="d-flex justify-content-between align-items-start mb-2">
						                                        <h6 class="mb-0 fw-bold" style="font-size: 1.1rem; color: #1d3557;"> <!-- ë”¥ ë¸”ë£¨ -->
						                                            ${schedule.scheduleTitle}
						                                        </h6>
						                                        <span class="text-muted" style="font-size: 0.85rem; color: #6c757d;"> <!-- ì—°íšŒìƒ‰ -->
						                                            ${schedule.empName}
						                                        </span>
						                                    </div>
						
						                                    <!-- ë‚´ìš© + ë‚ ì§œ -->
						                                    <div class="d-flex justify-content-between">
						                                        <p class="mb-0" style="font-size: 0.95rem; color: #343a40;"> <!-- ì§™ì€ íšŒìƒ‰ -->
						                                            ${schedule.scheduleContext}
						                                        </p>
						                                        <span style="font-size: 0.75rem; color: #adb5bd;"> <!-- ë” ì—°í•œ íšŒìƒ‰ -->
						                                            ${fn:substring(schedule.startDate, 5, 10)}
						                                        </span>
						                                    </div>
						                                </div>
						                            </c:if>
						                        </c:forEach>
						                    </c:when>
						                    <c:otherwise>
						                        <p class="text-muted">ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>
						                    </c:otherwise>
						                </c:choose>
						            </div>
						        </div>
						    </div>
						</div>
				</div>
			</div>
		</section>
	</div>
</div>





<!-- Modal -->
<div class="modal fade" id="exampleModal__" tabindex="-1"
	aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="exampleModalLabel">ì¶œí‡´ê·¼ QR</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal"
					aria-label="Close"></button>
			</div>
			<div class="modal-body"></div>
		</div>
	</div>
</div>

<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5" id="exampleModalLabel">ìƒì„¸ë³´ê¸°</h1>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body" style="max-width: 1000px;">


					</div>
					<div class="modal-footer">
					  <div class="btn-area">
					    <c:url value="/employee/empUpdate" var="empUpdate">
					      <c:param name="empWho" value="${principal.realUser.employee.empId}" />
					    </c:url>
					    <a class="btn btn-primary" href="${empUpdate}">
					      <i class="bi bi-pencil-square me-1"></i>ì •ë³´ ìˆ˜ì •
					    </a>
					  </div>
						<button type="button" class="btn btn-secondary" id="closeButton"
							data-bs-dismiss="modal">ë‹«ê¸°</button>
					</div>
				</div>
			</div>
		</div>


<!-- Simple DataTables ìŠ¤í¬ë¦½íŠ¸ -->
<!-- âœ… Chart.js ë¨¼ì € ë¡œë“œ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>
<script
	src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>

<script
	src="${pageContext.request.contextPath}/resources/js/content/chart.js"
	defer></script>
<script
	src="${pageContext.request.contextPath}/resources/js/content/appMain.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script
	src="${pageContext.request.contextPath}/resources/js/qr/qrModal.js"></script>
<script
	src="${pageContext.request.contextPath}/resources/js/content/updateTime.js"></script>
<script
	src="${pageContext.request.contextPath}/resources/js/content/updateWorkedTime.js"></script>
<script
	src="${pageContext.request.contextPath}/resources/js/qr/qrWorkStatusUpdate.js"></script>
<script>
	var empId = '${principal.realUser.empId}'; //ë¡œê·¸ì¸í•œ ì‚¬ì›ì˜ Id

   window.onload = function() {
      updateTime();
      updateWorkedTime();   // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°”ë¡œ ì‹¤í–‰
      setInterval(updateTime, 1000); // 1ì´ˆë§ˆë‹¤ ì‹œê°„ ê°±ì‹ 
      setInterval(updateWorkedTime, 1000);
      connectAndSendStatus();
      employeeCount();
      document.querySelector("#scheduleCard").addEventListener("click",function(){
    		window.location = "/schedule/list"
    	});
   };

   function navigateToDetail(postId) {
       window.location.href = "${pageContext.request.contextPath}/board/detail?noticeId=" + postId;
   }

   function updateWorkStatus() {
		var statusId = $('#workStatusSelect').val();  // ì„ íƒëœ ìƒíƒœ ID
		$.ajax({
			url: '/workstauts/updateWorkStatus',  // ì„œë²„ì˜ URL
			type: 'POST',
			data: {
				statusId: statusId,
				empId: empId,
				workDate: workDate
			},
			success: function(response) {
				alert('ì—…ë°ì´íŠ¸ ì„±ê³µ');
			},
			error: function() {
				alert('ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
			}
		});
	}
   let stompClient = null;

   function connectAndSendStatus() {
       const socket = new SockJS('/wss');
       stompClient = Stomp.over(socket);

       stompClient.connect({}, function(frame) {
           console.log('ğŸŸ¢ WebSocket ì—°ê²°ë¨ (ë¡œê·¸ì¸ ìƒíƒœ ì•Œë¦¼ìš©)', frame);

           // ì˜¨ë¼ì¸ ìƒíƒœ ì„œë²„ì— ì „ì†¡
           stompClient.send("/app/status", {}, JSON.stringify({
               empId: empId,
               status: "ì˜¨ë¼ì¸"
           }));
       });
   }

   function logoutStatus() {
   	if (stompClient) {
   		stompClient.send("/app/status", {}, JSON.stringify({
   			empId: empId,
   			status: "ì˜¤í”„ë¼ì¸"
   		}));
   	}
   	setTimeout(() => {
   		location.href = "/account/login/logout";
   	}, 300);
   }

   var scheduleList = [];
   <c:if test="${not empty scheduleList}">
       <c:forEach items="${scheduleList}" var="x">
           scheduleList.push({
               empId: "${x.empId}",
               empName : "${x.empName}",
               scheduleTitle: "${x.scheduleTitle}",
               scheduleContext: `${x.scheduleContext}`,
               startDate: "${x.startDate}",
               endDate: "${x.endDate}",
               scheduleVisibility: "${x.scheduleVisibility}",
               colorCode: "${x.colorCode}"
           });
       </c:forEach>
   </c:if>;

   function employeeCount() {

	   $.ajax({
		    url: "/employee/count",
		    type: "GET",
		    dataType: "json", // ì‘ë‹µ ë°ì´í„° íƒ€ì…ì„ JSONìœ¼ë¡œ ì§€ì •
		    success: function(data) {
		    	console.log(data)
		        $("#empCount").text(data.empCount);
		        $("#resignCount").text(data.resignCount);
		        $("#hireCount").text(data.hireCount);
		        $("#attendanceCount").text(data.attendanceCount);
		    },
		    error: function(xhr, status, error) {
		        console.log("Error: " + error);
		    }
		});
	}

</script>
<script
	src="${pageContext.request.contextPath}/resources/js/employee/empDetail.js"></script>