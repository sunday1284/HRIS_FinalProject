<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

<style>
  .card-body .row div {
    font-size: 16px;
    line-height: 2.1;
    padding: 4px 8px;
    border-bottom: 1px dashed #dee2e6;
  }
  .card-header {
    font-size: 17px;
    border-bottom: 1px solid #ccc;
  }
  .card-body .row:not(:last-child) {
    margin-bottom: 12px;
  }
</style>

<%-- í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ ì²˜ë¦¬ --%>
<c:set var="fullPath" value="${employee.empPath}" />
<c:set var="startIndex" value="${fn:indexOf(fullPath, 'fileImages')}" />
<c:set var="cutStart" value="${startIndex + 10}" />
<c:set var="cutEnd" value="${fn:length(fullPath)}" />
<c:set var="fileName" value="${fn:substring(fullPath, cutStart, cutEnd)}" />
<c:set var="webPath" value="/resources/fileImages/${fileName}" />

<!-- ğŸ’¼ ì§ì› ìƒì„¸ ì •ë³´ (ì¹´ë“œí˜• + ë°˜ì‘í˜• êµ¬ì„±) -->
<div class="container-fluid">

  <!-- ğŸ§¾ ê¸°ë³¸ì •ë³´ -->
  <div class="card mb-3">
    <div class="card-header bg-primary text-white fw-semibold">ê¸°ë³¸ì •ë³´</div>
    <div class="card-body row">
      <div class="col-md-3 text-center">
        <img src="${pageContext.request.contextPath}${webPath}" alt="í”„ë¡œí•„ ì‚¬ì§„" class="img-thumbnail" style="margin-top: 20px; width: 150px; height: 180px; object-fit: cover;" />
      </div>
      <div class="col-md-9">
        <div class="row">
          <div class="col-sm-6"><strong>ì‚¬ì›ë²ˆí˜¸:</strong> ${employee.empId}</div>
          <div class="col-sm-6"><strong>ì‚¬ì›ëª…:</strong> ${employee.name}</div>
          <div class="col-sm-6">
            <strong>ì…ì‚¬ì¼:</strong>
            <fmt:parseDate value="${employee.hireDate}" pattern="yyyy-MM-dd HH:mm:ss" var="parsedHireDate" />
            <fmt:formatDate value="${parsedHireDate}" pattern="yyyy-MM-dd" />
          </div>
          <div class="col-sm-6"><strong>ì´ë©”ì¼:</strong> ${employee.email}</div>
          <div class="col-sm-6"><strong>ìƒë…„ì›”ì¼:</strong> ${employee.juminFront}</div>
          <div class="col-sm-6"><strong>íœ´ëŒ€ì „í™”:</strong> ${employee.phoneNumber}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ğŸ¢ ì¸ì‚¬ì •ë³´ -->
  <div class="card mb-3">
    <div class="card-header bg-info text-white fw-semibold">ì¸ì‚¬ì •ë³´</div>
    <div class="card-body">
      <div class="row">
        <div class="col-sm-6"><strong>ë¶€ì„œ:</strong> ${employee.department.departmentName}</div>
        <div class="col-sm-6"><strong>íŒ€:</strong> ${employee.team.teamName}</div>
        <div class="col-sm-4"><strong>ì§ê¸‰:</strong> ${employee.rank.rankName}</div>
        <div class="col-sm-4"><strong>ì§ì±…:</strong> ${employee.job.jobName}</div>
        <div class="col-sm-4"><strong>ë‹´ë‹¹:</strong> ${employee.position.positionName}</div>
      </div>
    </div>
  </div>

  <!-- ğŸ“§ ì—°ë½ì •ë³´ -->
<!--   <div class="card mb-3"> -->
<!--     <div class="card-header bg-light fw-semibold">ì—°ë½ì •ë³´</div> -->
<!--     <div class="card-body"> -->
<!--       <div class="row"> -->
<%--         <div class="col-sm-4"><strong>ì´ë©”ì¼:</strong> ${employee.email}</div> --%>
<%--         <div class="col-sm-4"><strong>ìƒë…„ì›”ì¼:</strong> ${employee.juminFront}</div> --%>
<%--         <div class="col-sm-4"><strong>íœ´ëŒ€ì „í™”:</strong> ${employee.phoneNumber}</div> --%>
<!--       </div> -->	
<!--     </div> -->
<!--   </div> -->

  <!-- ğŸ  ì£¼ì†Œ ë° í•™ë ¥ -->
  <div class="card mb-3">
    <div class="card-header bg-secondary text-white fw-semibold">ì£¼ì†Œ ë° í•™ë ¥</div>
    <div class="card-body">
      <div class="row">
        <div class="col-sm-6"><strong>ì£¼ì†Œ:</strong> ${employee.address}</div>
        <div class="col-sm-6"><strong>ìƒì„¸ì£¼ì†Œ:</strong> ${employee.addressDetail}</div>
        <div class="col-sm-12"><strong>ìµœì¢… í•™ë ¥:</strong> ${employee.finalLevel}</div>
      </div>
    </div>
  </div>

  <!-- âœï¸ ìˆ˜ì • ë²„íŠ¼ -->
  <div class="text-end mt-4">
    <c:url value="/employee/empUpdate" var="empUpdate">
      <c:param name="empWho" value="${employee.empId}" />
    </c:url>
    <a class="btn btn-primary" href="${empUpdate}"><i class="bi bi-pencil-square me-1"></i>ì •ë³´ ìˆ˜ì •</a>
  </div>
</div>