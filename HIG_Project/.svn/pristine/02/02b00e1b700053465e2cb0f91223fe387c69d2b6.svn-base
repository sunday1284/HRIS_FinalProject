<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://www.springframework.org/security/tags"
	prefix="security"%>
<style>
.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    margin-bottom: 20px;
    background-color: transparent; 
    box-shadow: none;
    border: none;
}	
</style>

<!--     <div id="app"> -->
<!--         <div id="main"> -->
<!--             <div class="page-heading"> -->
<!--                 <div class="page-title"> -->
<!--                     <h3>ê²°ì¬ ë¬¸ì„œì–‘ì‹ ëª©ë¡</h3> -->
<!--                 </div> -->
<div class="top-bar">
     <!-- ì¢Œì¸¡: ë²„íŠ¼ ê·¸ë£¹ -->
    <div>	 
      <button type="button" class="btn btn-outline-secondary" onclick="history.back();">
        <i class="fas fa-arrow-left"></i> ë’¤ë¡œê°€ê¸°
      </button>
    </div>
    
    
    <!-- ìš°ì¸¡: Breadcrumb -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item fw-bold text-primary">ğŸ“Œ Quick Menu</li>
        <li class="breadcrumb-item"><a href="/approval/templateList">ë¬¸ì„œì‘ì„±</a></li>
        <li class="breadcrumb-item"><a href="/approval/mydrafts">ì œì¶œë¬¸ì„œ</a></li>
        <li class="breadcrumb-item"><a href="/approval/approverDrafts">ê²°ì¬í˜„í™©</a></li>
        <security:authorize access="hasAnyRole('HR_MANAGER', 'HR_ADMIN')">
        	<li class="breadcrumb-item active" aria-current="page">ê²°ì¬ì–‘ì‹</a></li>
        </security:authorize>
      </ol>
    </nav>

   
</div>
      <section class="section">
          <div class="card">
              <div class="card-header">
                  <h2 class="mb-0">ì–‘ì‹ ê´€ë¦¬</h2>
              </div>
              <div class="card-body">

                  <!-- ë°ì´í„° í…Œì´ë¸” ì»¨íŠ¸ë¡¤ -->
                  <div class="dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns">
                      <div class="dataTable-top">                        
                      </div>
                  </div>

                  <!-- í…Œì´ë¸” -->
                  <table id="approvalTable" class="table table-striped datatable">
                      <thead>
                          <tr>
                          	<th style="width: 20%;"><a href="#" class="dataTable-sorter">ì–‘ì‹ì½”ë“œ</a></th>
                              <th style="width: 20%;"><a href="#" class="dataTable-sorter">ì œëª©</a></th>
                              <th style="width: 20%;"><a href="#" class="dataTable-sorter">ìµœì¢…ìˆ˜ì •ì</a></th>
                              <th style="width: 15%;"><a href="#" class="dataTable-sorter">ì¹´í…Œê³ ë¦¬</a></th>
                              <th style="width: 15%;"><a href="#" class="dataTable-sorter">ìµœì´ˆë“±ë¡ì¼ì‹œ</a></th>
                              <th style="width: 10%;"><a href="#" class="dataTable-sorter">ë“±ë¡ìê¶Œí•œ</a></th>
                              <th style="width: 10%;"><a href="#" class="dataTable-sorter">ì‚¬ìš©ì—¬ë¶€</a></th>
                          </tr>
                      </thead>
                      <tbody>
                          <c:forEach items="${DraftTemplateList}" var="template">
                              <tr>
                                  <td>
                                      <input class="form-check-input" type="checkbox" value="${template.templateId}"/>
                                      ${template.templateId}
                                  </td>
                                  <td> 
                                      <a href="javascript:void(0);" onclick="TemplateDetail(${template.templateId})" class="text-primary">
                                          ${template.templateTite}
                                      </a>
                                  </td>
                                  <td>${template.employee.name}</td>
                                  <td>${template.templateCategory}</td>
                                  <td>
                                      <fmt:formatDate value="${template.templateCreate}" pattern="yyyyë…„MMì›”ddì¼" />
                                  </td>
                                  <td>${template.roleName}</td>
                                  <td>
                                      <c:choose>
                                          <c:when test="${template.temlpateDeleted eq 'N'}">
                                              <span class="badge bg-success">ì‚¬ìš©ê°€ëŠ¥</span>
                                          </c:when>
                                          <c:otherwise>
                                              <span class="badge bg-danger">ì‚¬ìš©ë¶ˆê°€</span>
                                          </c:otherwise>
                                      </c:choose>
                                  </td>
                              </tr>
                          </c:forEach>
                      </tbody>
                  </table>

                  <!-- ë²„íŠ¼ ì»¨í…Œì´ë„ˆ: í…Œì´ë¸” í•˜ë‹¨ ì˜¤ë¥¸ìª½ì— ë°°ì¹˜ -->
                  <div class="button-container mb-3" style="text-align: right; margin-top: 20px;">
                      <button type="button" class="btn btn-danger" onclick="deleteTemplate()">ì–‘ì‹ ì‚­ì œ</button>
                      <a class="btn btn-primary" href="${pageContext.request.contextPath}/approval/processForm">ì–‘ì‹ ì¶”ê°€</a>
                  </div>

              </div>
          </div>
      </section>
<!--             </div> -->
<!--         </div> -->
<!--     </div> -->

    <!-- ë¹„ë™ê¸° ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="text/javascript" src="${pageContext.request.contextPath}/resources/js/approval/approvalDelete.js"></script>
    <!-- Simple DataTables ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="${pageContext.request.contextPath}/assets/extensions/simple-datatables/umd/simple-datatables.js"></script>
    <script src="${pageContext.request.contextPath}/resources/template/dist/assets/static/js/pages/simple-datatables.js"></script>

    <script>
        function TemplateDetail(templateId) {
            window.location.href = "${pageContext.request.contextPath}/approval/" + templateId;
        }

        // ë°ì´í„° í…Œì´ë¸” ê²€ìƒ‰ ë° í˜ì´ì§€ ìˆ˜ ì¡°ì ˆ
        document.addEventListener("DOMContentLoaded", function () {
            const dataTable = new simpleDatatables.DataTable("#approvalTable", {
                searchable: true,
                fixedHeight: false
            });

            // í˜ì´ì§€ ìˆ˜ ì¡°ì ˆ
            document.getElementById("entriesPerPage").addEventListener("change", function () {
                dataTable.pageLength = parseInt(this.value);
                dataTable.refresh();
            });

            // ê²€ìƒ‰ ê¸°ëŠ¥
            document.getElementById("searchBox").addEventListener("input", function () {
                dataTable.search(this.value);
            });
        });
    </script>

