<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>

<h2>ì§ì›ì •ë³´ ìƒì„¸ ì¡°íšŒ</h2>
<table class="table">

    <!-- ê¸°ë³¸ì‚¬í•­ -->
    <thead class="table table-striped">
        <tr>
            <td colspan="4"><div class="card-header bg-success text-dark fw-bold">ê¸°ë³¸ì‚¬í•­</div></td>
        </tr>
        <tr>
            <th>í”„ë¡œí•„ì‚¬ì§„</th>
            <th>ì‚¬ì›ë²ˆí˜¸</th>
            <th>ì‚¬ì›ëª…</th>
            <th>ì…ì‚¬ì¼</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <!-- í”„ë¡œí•„ ì‚¬ì§„ -->
                <div id="imagePreviewContainer" style="width: 150px; height: 150px; border: 1px solid #ccc; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative;">
                    <!-- ê¸°ë³¸ í…ìŠ¤íŠ¸ (ì´ë¯¸ì§€ ì—†ìŒ) -->
                    <span id="noImageText" style="position: absolute; color: #999; font-size: 14px;">
                        <img src="${employee.empImg != null ? employee.empImg : '/resources/images/default-profile.png'}" alt="í”„ë¡œí•„ ì‚¬ì§„" style="width:100px; height:auto;" />
                    </span>
                    <!-- ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ -->
                    <img id="imagePreview" src="" alt="í”„ë¡œí•„ ì‚¬ì§„" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                </div>

            </td>
            <td>${employee.empId}</td>
            <td>${employee.name}</td>
            <td>
                <fmt:parseDate value="${employee.hireDate}" pattern="yyyy-MM-dd HH:mm:ss" var="parsedHireDate" />
                <fmt:formatDate value="${parsedHireDate}" pattern="yyyy-MM-dd" />
            </td>
        </tr>
        
    </tbody>

    <!-- ê¸°íƒ€ì •ë³´ -->
    <thead class="table table-striped">
        <tr>
            <td colspan="5"><div class="card-header bg-success text-dark fw-bold">ê¸°íƒ€ì •ë³´</div></td>
        </tr>
        <tr>
            <th>ë¶€ì„œ</th>
            <th>íŒ€</th>
            <th>ì§ê¸‰</th>
            <th>ì§ì±…</th>
            <th>ë‹´ë‹¹</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>${employee.department.departmentName}</td>
            <td>${employee.team.teamName}</td>
            <td>${employee.rank.rankName}</td>
            <td>${employee.job.jobName}</td>
            <td>${employee.position.positionName}</td>
        </tr>
    </tbody>

    <!-- ì¶”ê°€ì •ë³´ -->
    <thead class="table table-striped">
        <tr>
            <th>ì´ë©”ì¼</th>
            <th>ìƒë…„ì›”ì¼</th>
            <th>íœ´ëŒ€ì „í™”</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>${employee.email}</td>
            <td>${employee.juminFront}</td>
            <td>${employee.phoneNumber}</td>
        </tr>
    </tbody>

    <!-- ì£¼ì†Œ, í•™ë ¥, ê¸‰ì—¬ -->
    <thead class="table table-striped">
        <tr>
            <th>ì£¼ì†Œ</th>
            <th>ì£¼ì†Œìƒì„¸</th>
            <th>ìµœì¢… í•™ë ¥</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>${employee.address}</td>
            <td>${employee.addressDetail}</td>
            <td>${employee.finalLevel}</td>
        </tr>
    </tbody>

</table>

<!-- ğŸ“Œ íŒŒì¼ ì—…ë¡œë“œ í•„ë“œë¥¼ í…Œì´ë¸” ë°–ìœ¼ë¡œ ì´ë™ -->
<div class="mt-3">
    <label for="profileImage" class="form-label fw-bold">í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½</label>
    <input type="file" id="profileImage" class="form-control" accept="image/*">
</div>

<!-- ğŸ“Œ ìˆ˜ì • ë²„íŠ¼ë„ í…Œì´ë¸” ì•„ë˜ë¡œ ì •ë¦¬ -->
<div class="mt-3">
    <c:url value="/employee/empUpdate" var="empUpdate">
        <c:param name="empWho" value="${employee.empId}"/>
    </c:url>
    <a class="btn btn-primary" href="${empUpdate}">ì •ë³´ ìˆ˜ì •</a>
</div>	
	